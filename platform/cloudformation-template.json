{
  "AWSTemplateFormatVersion": "2010-09-09",

  "Description" : "Resources needed to run Eighty Kilometres server",

  "Resources" : {

"WorldInstanceLaunchConfiguration" : {
   "Type" : "AWS::AutoScaling::LaunchConfiguration",
   "Properties" : {
      "ImageId" : "ami-ba3492c9",      
      "InstanceType" : "t2.micro",
      "BlockDeviceMappings" : [ {
         "DeviceName" : "/dev/sda",
         "VirtualName" : "ephemeral10"
      } ]
   }
},

"WorldInstanceGroup" : {
   "Type" : "AWS::AutoScaling::AutoScalingGroup",
   "Properties" : {
      "AvailabilityZones" : { "Fn::GetAZs" : ""},
      "LaunchConfigurationName" : { "Ref" : "WorldInstanceLaunchConfiguration" },
      "MinSize" : "0",
      "MaxSize" : "1"
   }
},

"WorldLoadBalancer": {
  "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
  "Properties": {
    "CrossZone": true,
    "AvailabilityZones" : { "Fn::GetAZs" : ""},
    "ConnectionDrainingPolicy": {
      "Enabled": "true",
      "Timeout": "60"
    },
    "Listeners": [
      {
        "LoadBalancerPort": "80",
        "InstancePort": "80",
        "Protocol": "HTTP"
      }
    ],
    "HealthCheck": {
      "Target": "HTTP:80/",
      "HealthyThreshold": "2",
      "UnhealthyThreshold": "10",
      "Interval": "60",
      "Timeout": "5"
    }
  }
}

  }
}
